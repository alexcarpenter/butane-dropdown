var t=function(){var t=["a[href]","button:not([disabled]):not([aria-hidden])",'[tabindex]:not([tabindex^="-"])'],e=27,n=9,o=function(t,e){var n=this,o=e.activeClass;void 0===o&&(o="is-active");var i=e.onShow;void 0===i&&(i=function(){});var s=e.onHide;void 0===s&&(s=function(){});var r=e.onSelect;void 0===r&&(r=function(){}),this.config={activeClass:o,onShow:i,onHide:s,onSelect:r},this.shown=!1,this.dropdown=t,this.trigger=this.dropdown.querySelector("[aria-controls]"),this.menuId=this.trigger.getAttribute("aria-controls"),this.menu=document.getElementById(this.menuId),this.menu.hidden=!0,this.trigger.addEventListener("click",function(){return n.toggleDropdown()}),this.onClickOutside=this.onClickOutside.bind(this),this.onKeydown=this.onKeydown.bind(this)};o.prototype.addEventListeners=function(){var t=this;this.menu.addEventListener("click",function(e){return t.config.onSelect(e)}),document.addEventListener("keydown",this.onKeydown)},o.prototype.removeEventListeners=function(){var t=this;this.menu.removeEventListener("click",function(e){return t.config.onSelect(e)}),document.removeEventListener("keydown",this.onKeydown)},o.prototype.toggleDropdown=function(){this.shown?this.hideDropdown():this.showDropdown()},o.prototype.showDropdown=function(){this.activeElement=document.activeElement,this.shown=!0,this.addEventListeners(),this.trigger.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.config.activeClass),this.menu.hidden=!1,this.setFocusToFirstNode(),this.config.onShow(this.dropdown,event)},o.prototype.hideDropdown=function(){this.shown=!1,this.removeEventListeners(),this.trigger.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.config.activeClass),this.menu.hidden=!0,this.activeElement.focus(),this.config.onHide(this.dropdown,event)},o.prototype.onClickOutside=function(t){var e=t.target;this.menu.contains(e)||this.trigger.contains(e)||this.hideDropdown()},o.prototype.onKeydown=function(t){t.keyCode===e&&this.hideDropdown(t),t.keyCode===n&&this.maintainFocus(t)},o.prototype.getFocusableNodes=function(){var e=this.dropdown.querySelectorAll(t);return Object.keys(e).map(function(t){return e[t]})},o.prototype.setFocusToFirstNode=function(){var t=this.getFocusableNodes();t.length&&t[1].focus()},o.prototype.maintainFocus=function(t){var e=this.getFocusableNodes(),n=e.indexOf(document.activeElement);t.shiftKey&&0===n&&(e[e.length-1].focus(),t.preventDefault()),t.shiftKey||n!==e.length-1||(e[0].focus(),t.preventDefault())};return{init:function(t){var e=Object.assign({},{dropdownAttr:"data-butane-dropdown"},t);Array.from(document.querySelectorAll("["+e.dropdownAttr+"]")).forEach(function(t){new o(t,e)})}}}();module.exports=t;
//# sourceMappingURL=butane-dropdown.js.map
